% !TeX spellcheck = de_DE_frami
\documentclass[12pt]{article}
\usepackage[onehalfspacing]{setspace}
\usepackage[ngerman]{babel}
\usepackage[hidelinks]{hyperref}
\usepackage{verbatim} % for multiline comments
\usepackage{graphicx}
\graphicspath{ {./images/} }

\begin{document}

\begin{titlepage}	
	\title{\LARGE Seminararbeit\\ \large Algorithmisches Handeln mit Cryptowährungen}
	\date{\small \today}
	\author{\small Carl Heinrich Bellgardt}	
	\clearpage\maketitle
	\thispagestyle{empty}
\end{titlepage}

\setcounter{page}{2}
\tableofcontents
\pagebreak
\section{Vorwort}
	\glqq Ein Risiko entsteht, wenn du nicht weißt, was du tust.\grqq{}\footnote{manager magazin. Kai Lange und Christoph Rottwilm. Abgerufen 6. April 2021, von https://www.manager-magazin.de/finanzen/artikel/erfolg-reichtum-glueck-denken-wie-warren-buffett-a-1057702.html} Dieses Zitat stammt von Warren Buffet, einem der größten Investoren der Welt, und es bezieht sich auf den Aktienhandel, ein Themengebiet, das für seine Komplexität und Vielschichtigkeit bekannt ist, heutzutage wohl mehr, als jemals zuvor. Das Zitat gilt auch heute noch, aber für mich stellt sich die Frage: Wann weiß ich, was ich tue?\\
	Da ich seit einiger Zeit ein großes Interesse an Finanzen und insbesondere dem Aktien- und Währungshandel habe, ergibt sich für mich die Umsetzbarkeit des obigen Zitates, wenn ich Vorgänge der Entscheidungsfindung im Aktien- und Währungshandel automatisiere und optimiere.\\
	Im Bereich des Aktienhandels (Trading) gibt es bereits eine Vielzahl mathematischer Vorgehensweisen zur Berechnung von Faktoren und Strategien. Oft kommen diese Ergebnisse allerdings nur bei der Visualisierung zum Einsatz und werden eher als eine Art Handelsempfehlung gesehen. Das Vertrauen in eine Maschine ist geringer als in einen Menschen, zu groß ist die Angst vor einem übersehenem Faktor, auf den der Computer nicht programmiert ist.\\
	Maschinen existieren nur zu einem Zweck: Dem Menschen die Arbeit zu erleichtern. Das gilt auch für Computer. Sie sind Rechenmaschinen der besonderen Art, denn Sie rechnen in einem Tempo, bei dem kein Mensch mithalten kann. So haben Computer in allen Bereichen unseres Lebens Fuß gefasst, im Alltag ebenso wie in der Industrie, bis hin zu Weltraumreisen. Der Nachteil aller Maschinen ist jedoch bis heute, dass sie nicht denken können, dass jede Maschine auf nur eine oder wenige verschiedene spezifische Aufgaben eingerichtet ist.\\
	Ich selber habe schon früh begonnen, Aufgaben an selbst geschriebene Programme oder Macros zu übergeben, um mir die Arbeit zu erleichtern. Manchmal habe ich nur automatisiert Dateien verschoben und manchmal hat mein Script an der Bildschirmfarbe erkannt, welche Taste es im Computerspiel drücken muss. Auch kleine Simulationen, wie z.B. der Test von Roulettestrategien lassen sich in wenigen Sekunden problemlos mehrere Millionen Male durchführen. Computer sind schnell und effizient.\\
	Ist es also denkbar, auf Bauchgefühl und Intuition, also auf Denken und Erfahrung zu verzichten und stattdessen nach einem festen Muster, also einem Algorithmus, zu handeln. Kann man sich auf Indikatoren und reine mathematische Formeln verlassen? Ziel der folgenden Arbeit ist es, herauszufinden, ob anhand von Indikatoren eine erfolgreiche Handelsstrategie umsetzbar ist.

\section{Ziel der Arbeit}
	Anleitung zum algorithmischen Handeln mi Cryptowährungen auf mathematischer Ebene\\\\
	Der Versuch ist dann geglückt, wenn die gefundene Strategie in der Lage ist, im Durchschnitt einen Gewinn zu erwirtschaften, ohne dabei ein hohes Risiko zu tragen. In meinem Vorgehen bediene ich mich vieler bekannter Indikatoren und Strategien, ich werde diese per Backtesting\footnote{Simulation mit historischen Daten.} und Echtzeit-Simulation testen und vergleichen. Anhand der Testergebnisse entwickle ich eine eigene Strategie in Form einer Kombination verschiedener Indikatoren, so, wie es beim manuellen Handeln üblich ist. Zuletzt werde ich die Strategie auch praktisch anwenden, und zwar auf dem Cryptomarkt im Bereich der Cryptowährungen\footnote{Währungen, die nur digital als Zahlungsmittel existieren. Meist unabhängig von Kontrolle (siehe Blockchain, Bitcoin)}. Dafür habe ich mich entschieden, weil einerseits dazu große Datensätze, die zum Testen der Strategie notwendig sind, vorhanden und mir zugänglich sind, und andererseits wegen geringer Nebenkosten gut mit Kleinstbeträgen zu handeln ist. Außerdem ist der Cryptomarkt ein ausschließlich digitales Phänomen, weshalb es bereits einige Programmierbibliotheken und APIs\footnote{\glqq Programmierschnittstelle\grqq{}; ein Programmteil, meist öffentlich verfügbar, zum Interargieren mit anderen System, in diesem Fall Beispielsweise Datenbanken oder digitale Handelsplattformen} gibt.\\
	Meine Strategie, also meine in der Versuchsreihe erzielten Ergebnisse, werden einer Reihe Performencetests unterzogen, um sie hinsichtlich verschiedener Faktoren, wie zum Beispiel dem durchschnittlichen Gewinn oder möglichen Risiken, zu bewerten und gegebenenfalls modifizieren zu können.
	
\subsection{Arbeitsmittel}
	Python ist eine für Data-Science oft verwendete Programmiersprache mit viele Erweiterungen in Form von Bibliotheken, was sie gut für diese Arbeit eignet. \\
	Zu aller erst gilt es, die Grundlage für die Programmierarbeit zu bereiten. Dabei teilt sich das Programm in verschiedene Komponenten. <[folgendes rausnehmen:] Die Eingabe befasst sich in diesem Fall mit einer wichtigen Frage:> Woher werden die Cryptodaten bezogen? Echtzeitwerte kann man relativ einfach mittels Webcrawling oder diversen Trading APIs beziehungsweise Python Libraries erhalten. Für umfangreiches Testen sind allerdings möglichst genaue Langzeitdaten nötig. Es bietet sich Kaggle an, ein Datenbankarchiv in dem sich unter anderem auch minütliche Daten hunderter Cryptos seit ihrer Aufzeichnung befinden, bei einigen Währungen ergibt das mehrere Millionen Angaben.
 	Nun, wo die Eingabe, also der Input, gesichert ist, geht es an die Verarbeitung.> Diese beschäftigt sich mit allen Berechnungen, Indikatoren und Prognosen, etc., also dem eigentlichen Inhalt dieser Arbeit, dem Hauptteil. Dieser wird voraussichtlich komplett in Python programmiert. Schnelles Ein- und Auslesen von Daten ermöglicht die Bibliothek \glqq Feather\grqq{}. 
	Ein eher Zeitaufwendiger Teil ist zuletzt die Ausgabe. Einfach Zahlen auszugeben ist zwar einfach aber nicht immer gut für einen Menschen zu begreifen, weshalb eine gute Ausgabe nicht unwichtig ist. Die Python-Bibliothek Matplotlib eignet sich gut, um Graphen zu erstellen, da Graphische Oberflächen in Python allerdings viele Probleme und einen großen Aufwand mit sich bringen, kann für die GUI\footnote{Graphical User Interface (engl. Grafische Benutzeroberfläche)} einen Http-Server. Flask ist eine leicht zu bedienende API, welche alles mit sich bringt, was für das Hosten von Webseiten nötig ist. So wird die Seite letztlich in HTML, CSS und JavaScript geschrieben, was in den meisten Fällen sehr viel simpler ausfällt als eine tatsächliche GUI, da diese Sprachen für nur diesen Zweck gemacht sind.

\section{Grundlagen}
\subsection{Cryptowährungen}
	\subsubsection{Entstehung und Nutzen}
	\subsubsection{Vorteile von Cryptowährung}
		Jeder kennt Fiatwährungen, vielleicht nur nicht unter diesem Namen. Fiatwährungen sind beispielsweise Euro oder US-Dollar, nationale, physische Währungen. Cryptowährungen stellen das Gegenteil da. Sie haben weder eine physische Herkunft oder Präsenz noch sind sie an eine Nationalität gebunden. Durch die Blockchain sind sie dezentral aufgestellte Währungen mit einer Festen Inflation und Regulation. Sie können durch Fiatwährungen oder mit anderen Cryptos gehandelt und dann in einem Cryptowallet (engl. wallet -> Portemonnaie) gespeichert werden. Durch ihre Unabhängigkeit von Nationalität ergibt sich der Wert einer Cryptowährung nicht aus Gütern, sondern aus ihrer Benutzung, also ihrem Handelsvolumen. Ist eine Cryptowährung gefragter, so steigt ihr Verkaufswert.
	\subsubsection{Funktionsweise einer Cryptowährung}
		https://www.cryptolist.de/cardano
		https://www.ibm.com/de-de/topics/what-is-blockchain
		https://cardano.org/ouroboros/
		https://forum.cardano.org/t/was-ist-staking-und-wie-funktioniert-es-unter-cardano/27622
		Den Begriff Blockchain hat vielleicht jeder schon einmal gehört. Das Prinzip einer Blockchain (engl. Block-Kette) ist sehr allgemein gehalten, und kann auch in vielen Bereichen neben Cryptos verwendet werden, zum Beispiel für jegliche Art von Protokollen. Speziell für Cryptowährungen bezeichnet der Begriff Blockchain die Abfolge aller Transaktionen, in ihr ist also protokolliert, von welchem Wallet Cryptos zu einem anderen überwiesen wurden. Jedem Block ist ein sogenannter Hash zugewiesen, eine Zeichenfolge die sich durch komplexe mathematische Berechnungen aus dem Hash des vorhergehenden Blockes und den neuen Transaktionen ergibt. So wird linear ein Block nach dem anderen geschmiedet. Der Zeitraum eines Blockes variiert kann von verschieden Faktoren wie der Menge an Transaktionen abhängen. Diese Blöcke sind wie in einer Kette aneinander gebunden. Dadurch erhält die Blockchain ihre wichtigste Eigenschaft: wie bei einer echten Kette darf kein Glied fehlen, ansonsten funktioniert sie nicht. Wenn ein Block manipuliert wird, ändert sich auch der Hash für den Block danach und damit auch die Hashes für alle darauffolgenden Blöcke. Ein Fehler fällt so direkt auf. Dieses System sorgt für die Sicherheit und Konsistenz der Blockchain, die bei Geldtransaktionen erforderlich ist. Um die neuen Blöcke zu berechnen, bedienen sich Cryptos der ersten Generation sogenannten Crypto-Minern. Computer, aus Effizienzgründen meistens umfunktionierte Grafikprozessoren, die über eine Kopie der ganzen oder eines Teils der Blockchain verfügen, und deren einzige Aufgabe isd, die Kette erweitern. Die Masse der Rechner und die gegenseitige Kontrolle sorgt für die nötige Fehlsicherheit. Für diese Arbeit werden die Miner in der Währung selber bezahlt, wobei die Bezahlung neu geschaffenes, also \glqq geschürftes\grqq{} Geld ist. Somit entspricht diese Bezahlung gleichzeitig dem Prozess der Inflation der Währung. Die Inflationsrate ist also fest bestimmt, unabhängig der Anzahl der Miner. Für jeden Zeitpunkt in Zukunft und Vergangenheit lässt sich berechnen, wie viele Einheiten einer Währung existieren. Da immer nur der Miner der den neuen Block am schnellsten berechnet bezahlt wird, schließen sich viele Miner in so genannten Mining-Pools zusammen um ihre Profite untereinander aufzuteilen und ihre Gewinnchance zu erhöhen. Dieses ganze Verfahren zur Berechnung der Blockchain wird \glqq Proof of Work\grqq{} (kurz PoW) genannt, da die Arbeit der Miner bezahlt wird (engl. Work -> Arbeiter). Nachteile dieses Systems sind zum einen, dass große Mengen von Grafikkarten zum Minen aufgekauft werden, was Preise erhöht und zu Verfügbarkeitsproblemen von Grafikkarten für den normalen Verbraucher führt, und zum anderen, dass die mit wachsendem Handelsvolumen der Währung auch der Aufwand und die Anzahl der Miner steigen, was zu einem enormen Stromverbrauch führt. Die daraus resultierende schlechte Ökobilanz der auf PoW basierenden Cryptos, was den Großteil aller Cryptowährungen betrifft, führte zur Entwicklung der dritten Generation der Cryptowährungen. Der Baum.\\
		Diese basieren auf dem Proof of Stake Prinzip. Dabei  u
		https://forum.cardano.org/t/was-ist-staking-und-wie-funktioniert-es-unter-cardano/27622
		<Blockchain Bitcoin Proof of State, Proof of Stake/Proof of work, mining...>

\subsection{Trading}
	\subsubsection{Cryptohandel mit Profit}
		https://www.boerse-stuttgart.de/de-de/handel/kryptowaehrungen-handeln/bitcoin-kurs/
		Was ist nun aber der Sinn des Handelns mit Cryptos, wenn damit kein Produkt erworben wird. In diesem Fall ist unsere Währung in einem gewissen Sinne das Produkt. Der Wert ergibt sich im Grunde genommen aus dem Prinzip von Angebot und Nachfrage: Je kleiner das Angebot und je größer die Nachfrage, desto höher ist der Kurs. Diese beiden Faktoren werden jedoch von Dingen wie politischen Entscheidungen, Publicity der Währung im allgemeinen oder einfach den normalen Schwankungen durch Verkäufe und daraus resultierenden Kettenreaktionen beeinflusst. Um daraus nun Profit zu generieren kauft man wie bei allen Investitionen das Produkt für einen bestimmten Preis und versucht es für einen höheren wieder zu verkaufen. Durch eher höhere Schwankungen im Vergleich zu Aktien oder Fiatwährungen wirkt Crypto zwar riskanter, jedoch beschleunigt es auch das Handeln. Während die meisten Aktien nur wenige Prozente in Monaten steigen und sich der Dollar grade einmal um wenige Cents im Jahr bewegt, schwanken frequentiert gehandelte Cryptos gerne um 30\% an innerhalb eines Tages. Mit einem Produkt was seinen Preis nicht verändert kann demnach auch kein Profit erhandelt werden.  
		<Kursschwankungen, Wallet, Reaktionszeit, Microtrading\\>
		<Währungshandel allgemein, short, long, microtrading>
		
	\subsubsection{Trend}
		\glqq Ein Trend ist im Sinne der Preisbildung an der Börse eine außerordentliche Entwicklung der Bewertung eines Wertpapiers im Zeitablauf in eine bestimmte Richtung \grqq{}.  (https://www.att-trading.com/trading-wiki/was-ist-ein-trend/) Da Trading mit Cryptowährungen in diesem Aspekt etwa gleich abläuft, lässt sich das Konzept des Trends auch hier verwenden. Trends werden im Allgemeinen unterteilt in Aufwärtstrends, Abwärtstrends und Seitwärtstrends. Diese Unterteilen sich jeweils in verschiedene Trendphasen, in denen der Kurs sich abwechselnd mit und gegen den Trend bewegt, man spricht von Bewegung und Korrektur, vergleichbar mit einem kleineren Trend im Trend beziehungsweise einem untergeordneten Trend. Bei Trends wird versucht in vielen Bewegungen und Korrekturen eine allgemeine Richtung zu erkennen, da jedoch sie nicht durch feste Schwellenwerte in Größe, Zeitraum oder Volumen definiert sind, kann die Trendanalyse verschieden angewendet interpretiert und angewendet werden. Beispielsweise kann ein Kurs innerhalb eines Tages sinken, also einen Abwärtstrend aufweisen, aber gleichzeitig bei der Betrachtung eines ganzen Monats einem klaren Aufwärtstrend zugeordnet werden. Ob dies nun nur eine neue Trendphase oder der gar der wechsel zu einem neuen Langzeittrend ist kann dann unterschiedlich interpretiert werden.
	\subsubsection{Indikatoren}
		https://www.wortbedeutung.info/Indikator/ Sobald man einen Trend erkannt hat, gilt es, diesen auch anzuwenden. Hier kommen Indikatoren zum Einsatz. Das Wort Indikator kommt vom griechischen indicare, \glqq anzeigen\grqq{}. Und so wie Indikatoren in der Chemie zum Beispiel zum Nachweisen, oder Anzeigen, chemischer Stoffe verwendet wird, so dienen sie im Handel dem Anzeigen von Kurseigenschaften. In der Fachsprache ist ein Indikator ein Anzeichen für eine bestimmte Entwicklung oder einen eingetretenen Zustand. (Google, indikator, src oxford language). Bei Indikatoren im Cryptotrading geht es auch um Zustände, beziehungsweise die Entwicklung dieser, zum Beispiel das Erkennen eines Trends, Berechnen von möglichen Kaufs- und Verkaufssignalen oder <zur Risikobestimmung>. Auch die Interpretation von Indikatoren kann auf viele verschiedene Arten erfolgen, oft nutzt man zum Beispiel Schwellenwerte um die Ergebnisse von Indikatoren in bestimmte Trends oder Signale zu unterteilen.
	\subsubsection{todo}
		ema \\
		macd\\
		actual definition cryptoäwhrung (zb oxford lang)\\
		vorteile von cryptos und risiken

\section{Praktische Umsetzung}
\subsection{Datenbeschaffung}
	\subsubsection{Testdaten}Anzeichen für eine bestimmte Entwicklung, einen eingetretenen Zustand
		Die Testdaten sind jene Daten, die für die Umfangreichen vorläufigen Tests verwendet werden. Nach dem alten Prinzip die Vergangenheit zu nutzen, um in der Zukunft bessere Entscheidungen zu treffen, werde ich meinen Algorithmus mit Daten aus der Vergangenheit erproben, bevor ich ihn auf Echtzeitdaten anwende.\\
		Bei den Testdaten ist besonders wichtig, dass sie nicht nur möglichst genau und in gleichen möglichst kleinen Zeitabständen vorhanden sind, sondern auch, dass es möglichst viele sind. Im allgemeinen gilt, je mehr Daten vorhanden sind, desto aussagekräftiger sind auch die Ergebnisse.\\
		Wie bereits unter den Arbeitsmitteln aufgeführt beziehe ich große und präzise Cryptodaten der Vergangenheit von der Datensatzbibliothek Kaggle\footnote{Kaggle. https://www.kaggle.com/}. Die Daten können direkt als Zip-Archiv heruntergeladen werden. Darin befinden sich Zahlreiche Dateien, alle nach dem gleichen Prinzip benannt. Ungetrennt von einander stehen im Dateinamen Cryptowährung und Referenzwährung, meist US-Dollar (usd). Die Daten selber sind im Microsoft-Excel Format gespeichert. Da dieses verhältnismäßig langsam ist, bietet es sich an, die Daten mit Hilfe der csv-Bibliothek für Python einzulesen und als Feather Datei zu speichern. 
	\subsubsection{Echtzeitdaten}
	\subsubsection{Datenspeicherung (SQL und Feather)}
		Um große Datenmengen zu verwalten, gilt es, sich auf zwei Wesentliche Faktoren zu konzentrieren: Wie effizient und schnell können Daten gespeichert und geladen werden, und wie effizient können sie nach Kriterien gefiltert oder sortiert werden. Für eher kurzzeitige Speicherungen habe ich mich für die Python-Bibliothek Feather entschieden, da sie eine sehr gute Geschwindigkeit beim speichern und lesen von Daten bietet, aber auch weil sie das Pandas Format verwendet, mit dem man ohne weitere Umstrukturierungen gut weiterarbeiten kann, und welches auch direkt mit Zeit verknüpfte Daten unterstützt. Um gut sortieren und filtern zu können bediene ich mich dem weit verbreiteten Datenbanksystem SQL, in diesem Fall SQLite3. Im Gegensatz zu den meist benutzten Server und Client basierten Varianten wie MySQL benutzt SQLite nur eine lokale Datei als eigentliche Datenbank. Um Multithreading Fehler vorzubeugen, verwende ich es aber als einen lokalen Socketserver. Wie genau dieser Funktioniert werde ich nicht erläutern, da es nicht für die Arbeit relevant ist. Es reicht zu wissen, dass der Server SQL-Anfragen zum Beispiel mit Suchkriterien annimmt und entsprechend Daten zurückgibt oder neue Daten einträgt beziehungsweise alte löscht.
\subsection{Datenverarbeitung}
	\subsubsection{Trend}
		- gibt die Richtung/den Verlauf an
		- Zukunftsprognoso, in welche Richtung wird der Kurs sich vermutlich bewegen
	\subsubsection{Indikatoren}
		- Mathematische Formeln für Berechnungen
		- kann berechnen: Trend, Verkaufssignale, Risiko
	\subsubsection{Beispiel am MACD}
		Am Beispiel des MACD Indikators erkläre ich, wie ich einzelne Komponenten für die Datenverarbeitung erstelle. Diese Komponenten sind kleine Teilprogramme, die einen Indikator berechnen und Werte zurückgeben, die dann zusammen über die Tradingstrategie entscheiden.
		Der MACD (zu Deutsch: Indikator für das Zusammen-/Auseinanderlaufen des gleitenden Durchschnitts\footnote{Wikipedia. Abgerufen 20. August 2021, von https://de.wikipedia.org/wiki/MACD}) ist recht simpel zu berechnen. Er beruht auf dem Häufig genutzten EMA (exponential moving average), einem gewichteten Durchschnitt. Eine solche Rundungsfunktion hilft kleine Schwankungen herauszufiltern und den allgemeinen Trend sichtbar zu machen. Der MACD besteht zum einen aus der MACD-Line, welche sich aus der Differenz eines schnellen EMAs, meist aus den Werten von 12 Tagen, und eines langsamen, meiste 26 Tage. Dann gibt es die Signal-Line, welche ein EMA von meist 9 Tagen der MACD-Line ist, also eine erneut geglättete Linie.\\
		Bei der Auswertung des MACDs liegt die Aufmerksamkeit in der Differenz der MACD-Line und der durch die erneute Glättung langsamer verlaufenden Signal-Line, beziehungsweise ihren Schnittpunkten. Um diese hervorzuheben wird gerne die Differenz beider Linien errechnet, diese wird als Histogramm bezeichnet. Ist das Histogramm positiv, so indiziert sie einen Aufwärtstrend, ist es negativ, so handelt es sich vermutlich um einen Abwärtstrend. Wechselt das Histogramm sein Vorzeichen, also schneiden sich MACD und Signal-Line, so ist dies ein neues Kaufsignal. Je höher der Betrag des Histogramms, desto stärker ist der Trend.\\
		Bei dem MACD Indikator können also zwei Sachen abgelesen werden. Zum einen können durch Schnittpunkte Kaufsignale errechnet werden, zum anderen können die Werte des Histogramms und sein Verlauf als Trendbeschreibend verstanden werden. Ich werde beide Anwendungsmöglichkeiten des MACDs testen.
\subsection{Auswertungs-/Bewertungsalgorithmus}
	\subsubsection{Ergebnisse der Indikatoren verarbeiten}
\subsection{Testen des praktischen Ergebnisses}
\section{Auswertung der Arbeit (Dieses Kaptiel umbenennen!)}

\end{document}

